<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mini POS System</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        body {
            padding-top: 60px;
        }
        .section {
            display: none;
        }
        .visible {
            display: block;
        }
    </style>
</head>
<body>
<!-- Navigation Bar -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
    <div class="container-fluid">
        <a class="navbar-brand" href="#">Mini POS</a>
        <div class="collapse navbar-collapse">
            <ul class="navbar-nav me-auto">
                <li class="nav-item"><a class="nav-link nav-btn" href="#" data-target="item-section">Items</a></li>
                <li class="nav-item"><a class="nav-link nav-btn" href="#" data-target="customer-section">Customers</a></li>
                <li class="nav-item"><a class="nav-link nav-btn" href="#" data-target="order-section">Orders</a></li>
            </ul>
        </div>
    </div>
</nav>

<!-- Item Section -->
<div id="item-section" class="section container">
    <h3>Item Management</h3>
    <form id="item-form" class="row g-2">
        <input type="hidden" id="item-index">
        <div class="col-md-3"><input type="text" class="form-control" placeholder="Item ID" id="item-id"></div>
        <div class="col-md-3"><input type="text" class="form-control" placeholder="Item Name" id="item-name"></div>
        <div class="col-md-2"><input type="number" class="form-control" placeholder="Item Price" id="item-price"></div>
        <div class="col-md-2"><input type="number" class="form-control" placeholder="Item QTY" id="item-qty"></div>
        <div class="col-md-2">
            <button type="button" class="btn btn-success" id="add-item">Add</button>
            <button type="button" class="btn btn-warning" id="update-item">Update</button>
            <button type="button" class="btn btn-secondary" id="refresh-item">Refresh</button>
        </div>
    </form>
    <table class="table mt-3">
        <thead><tr><th>ID</th><th>Name</th><th>Price</th><th>QTY</th><th>Actions</th></tr></thead>
        <tbody id="item-table"></tbody>
    </table>
</div>

<!-- Customer Section -->
<div id="customer-section" class="section container">
    <h3>Customer Management</h3>
    <form id="customer-form" class="row g-2">
        <input type="hidden" id="customer-index">
        <div class="col-md-2"><input type="text" class="form-control" placeholder="Customer ID" id="customer-id"></div>
        <div class="col-md-2"><input type="text" class="form-control" placeholder="Name" id="customer-name"></div>
        <div class="col-md-2"><input type="text" class="form-control" placeholder="Address" id="customer-address"></div>
        <div class="col-md-2"><input type="text" class="form-control" placeholder="Number" id="customer-number"></div>
        <div class="col-md-2"><input type="email" class="form-control" placeholder="Email" id="customer-email"></div>
        <div class="col-md-2">
            <button type="button" class="btn btn-success" id="add-customer">Add</button>
            <button type="button" class="btn btn-warning" id="update-customer">Update</button>
            <button type="button" class="btn btn-secondary" id="refresh-customer">Refresh</button>
        </div>
    </form>
    <table class="table mt-3">
        <thead><tr><th>ID</th><th>Name</th><th>Address</th><th>Number</th><th>Email</th><th>Actions</th></tr></thead>
        <tbody id="customer-table"></tbody>
    </table>
</div>

<!-- Order Section -->
<div id="order-section" class="section container">
    <h3>Order Management</h3>
    <form id="order-form" class="row g-2">
        <div class="col-md-2"><input type="text" class="form-control" placeholder="Order ID" id="order-id"></div>
        <div class="col-md-2">
            <select class="form-select" id="select-customer"><option>Select Customer</option></select>
        </div>
        <div class="col-md-2"><input type="text" class="form-control" placeholder="Customer Name" id="order-customer-name" readonly></div>
        <div class="col-md-2">
            <select class="form-select" id="select-item"><option>Select Item</option></select>
        </div>
        <div class="col-md-1"><input type="number" class="form-control" placeholder="Qty" id="order-qty"></div>
        <div class="col-md-2"><input type="text" class="form-control" placeholder="Amount" id="order-amount" readonly></div>
        <div class="col-md-1">
            <button type="button" class="btn btn-primary" id="add-order">Add</button>
        </div>
    </form>
    <button type="button" class="btn btn-success mt-2" id="place-order">Place Order</button>
    <table class="table mt-3">
        <thead><tr><th>Order ID</th><th>Customer</th><th>Item</th><th>QTY</th><th>Amount</th></tr></thead>
        <tbody id="order-table"></tbody>
    </table>
</div>

<script>
    const items = [];
    const customers = [];
    const orders = [];

    function refreshItems() {
        $('#item-table').empty();
        $('#select-item').html('<option>Select Item</option>');
        items.forEach((item, index) => {
            $('#item-table').append(`<tr data-index='${index}'><td>${item.id}</td><td>${item.name}</td><td>${item.price}</td><td>${item.qty}</td><td><button class='btn btn-sm btn-danger delete-item' data-index='${index}'>Delete</button></td></tr>`);
            $('#select-item').append(`<option value='${item.id}'>${item.id}</option>`);
        });
    }

    function refreshCustomers() {
        $('#customer-table').empty();
        $('#select-customer').html('<option>Select Customer</option>');
        customers.forEach((cus, index) => {
            $('#customer-table').append(`<tr data-index='${index}'><td>${cus.id}</td><td>${cus.name}</td><td>${cus.address}</td><td>${cus.number}</td><td>${cus.email}</td><td><button class='btn btn-sm btn-danger delete-customer' data-index='${index}'>Delete</button></td></tr>`);
            $('#select-customer').append(`<option value='${cus.id}'>${cus.id}</option>`);
        });
    }

    function refreshOrders() {
        $('#order-table').empty();
        orders.forEach((order) => {
            $('#order-table').append(`<tr><td>${order.id}</td><td>${order.customer}</td><td>${order.item}</td><td>${order.qty}</td><td>${order.amount}</td></tr>`);
        });
    }

    $(document).ready(function () {
        $('.nav-btn').click(function () {
            $('.section').removeClass('visible');
            $('#' + $(this).data('target')).addClass('visible');
        });

        $('#item-table').on('click', 'tr', function () {
            const index = $(this).data('index');
            const item = items[index];
            $('#item-id').val(item.id);
            $('#item-name').val(item.name);
            $('#item-price').val(item.price);
            $('#item-qty').val(item.qty);
            $('#item-index').val(index);
        });

        $('#customer-table').on('click', 'tr', function () {
            const index = $(this).data('index');
            const cus = customers[index];
            $('#customer-id').val(cus.id);
            $('#customer-name').val(cus.name);
            $('#customer-address').val(cus.address);
            $('#customer-number').val(cus.number);
            $('#customer-email').val(cus.email);
            $('#customer-index').val(index);
        });

        $('#add-item').click(function () {
            const item = {
                id: $('#item-id').val(),
                name: $('#item-name').val(),
                price: parseFloat($('#item-price').val()),
                qty: parseInt($('#item-qty').val())
            };
            items.push(item);
            refreshItems();
            $('#item-form')[0].reset();
            $('#item-index').val('');
        });

        $('#update-item').click(function () {
            const index = $('#item-index').val();
            if (index !== '') {
                items[index] = {
                    id: $('#item-id').val(),
                    name: $('#item-name').val(),
                    price: parseFloat($('#item-price').val()),
                    qty: parseInt($('#item-qty').val())
                };
                refreshItems();
                $('#item-form')[0].reset();
                $('#item-index').val('');
            }
        });

        $('#add-customer').click(function () {
            const customer = {
                id: $('#customer-id').val(),
                name: $('#customer-name').val(),
                address: $('#customer-address').val(),
                number: $('#customer-number').val(),
                email: $('#customer-email').val()
            };
            customers.push(customer);
            refreshCustomers();
            $('#customer-form')[0].reset();
            $('#customer-index').val('');
        });

        $('#update-customer').click(function () {
            const index = $('#customer-index').val();
            if (index !== '') {
                customers[index] = {
                    id: $('#customer-id').val(),
                    name: $('#customer-name').val(),
                    address: $('#customer-address').val(),
                    number: $('#customer-number').val
                    (),
                    email: $('#customer-email').val()
                };
                refreshCustomers();
                $('#customer-form')[0].reset();
                $('#customer-index').val('');
            }
        });

        $('#item-table').on('click', '.delete-item', function () {
            items.splice($(this).data('index'), 1);
            refreshItems();
        });

        $('#customer-table').on('click', '.delete-customer', function () {
            customers.splice($(this).data('index'), 1);
            refreshCustomers();
        });

        $('#refresh-item').click(() => $('#item-form')[0].reset());
        $('#refresh-customer').click(() => $('#customer-form')[0].reset());

        $('#select-customer').change(function () {
            const selected = $(this).val();
            const customer = customers.find(c => c.id === selected);
            $('#order-customer-name').val(customer ? customer.name : '');
        });

        $('#select-item, #order-qty').change(function () {
            const itemId = $('#select-item').val();
            const qty = parseInt($('#order-qty').val());
            const item = items.find(i => i.id === itemId);
            if (item && qty) {
                $('#order-amount').val(item.price * qty);
            }
        });

        $('#add-order').click(function () {
            const itemId = $('#select-item').val();
            const qty = parseInt($('#order-qty').val());
            const item = items.find(i => i.id === itemId);
            if (item && qty <= item.qty) {
                orders.push({
                    id: $('#order-id').val(),
                    customer: $('#order-customer-name').val(),
                    item: itemId,
                    qty: qty,
                    amount: item.price * qty
                });
                refreshOrders();
            } else {
                alert("Not enough stock.");
            }
        });
        $('#place-order').click(function () {
            orders.forEach(order => {
                const item = items.find(i => i.id === order.item);
                item.qty -= order.qty;
            });

            refreshItems();
            orders.length = 0;
            refreshOrders();
            $('#order-form')[0].reset();

        });
    });
</script>
</body>
</html>
